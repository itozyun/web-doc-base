
/*  box
--------------------------------------------------------------------------------------*/
.box {
    @include clearfix;
    @include unbreak-inside;

    li &, dl &, tr &, .note & {
        margin : 0;
    }

    margin : 1em 1em 0;

    @if( $CANUSE_1ST_OF_TYPE_PSEUDO_CLASS ){
        & > p:first-of-type {
            margin-top : math.div(-$PARAGRAPH_LINE_HEIGHT_EM + 1em, 4);
        }
        tr & > p:first-of-type {
            margin-top : auto; // Windown XP Safari 3.2.3 で 0 だとレイアウトが崩れる
        }
    }

    p, dl, ul, ol {
        @include responsive-horizontal-margin(1, 0, 1em, 1);
    }
    ul, ol {
        list-style-position : inside;
    }

    img, .caption, iframe
    //, embed, object, video
    {
        float  : left;
        margin : 0 1em 1em 0;
    }
    img, iframe {
        @if( $CANUSE_MAX_AND_MIN_SIZES ){
            @if( $Option_mobileOnly ){
                max-width : 100%; // 4_Typography/04_Typography.scss を上書き
            } @else if( $CANUSE_CSS_MEDIA_QUERY ){
                max-width : 100%; // 4_Typography/04_Typography.scss を上書き
            };
        }
    }
}

@if( $IS_OLD_GECKO ){
    hr { display: -moz-inline-box; } // .box 内の hr が img に重なるのを妨げる
}

/*  Tablet
--------------------------------------------------------------------------------------*/
@include media(tablet_print) {
    .box {
        margin : 1em 0 0;

        img, .caption, iframe
        //, embed, object, video
        {
            margin  : 0 1em 1em $TABLET_HORIZONTAL_MARGIN;
        }
    }
}

/*  Phablet
--------------------------------------------------------------------------------------*/
@include media(phablet) {
    .box {
        img, .caption, iframe
        //, embed, object, video
        {
            margin  : 0 1em 1em $PHABLET_HORIZONTAL_MARGIN;
        }
    }
}

/*  Phone
--------------------------------------------------------------------------------------*/
@include media(phone) {
    @if( $CANUSE_1ST_OF_TYPE_PSEUDO_CLASS ){
        .box > p:first-of-type {
            margin-top : math.div(-$PARAGRAPH_LINE_HEIGHT_PHONE_EM + 1em, 4);
        }
    }
    .box {
        img, .caption, iframe
        //, embed, object, video
        {
            margin  : 0 1em 1em $PHONE_HORIZONTAL_MARGIN;
        }
    }
}

/*  Phone-
--------------------------------------------------------------------------------------*/
@include media(smallphone) {
    .box {
        img, .caption, iframe
        //, embed, object, video
        {
            float  : none;
            margin : 0 auto 1em;
        }
    }
}

/*  Watch
--------------------------------------------------------------------------------------*/
@include media(watch) {
    @if( $CANUSE_1ST_OF_TYPE_PSEUDO_CLASS ){
        .box > p:first-of-type {
            margin-top : math.div(-$PARAGRAPH_LINE_HEIGHT_WATCH_EM + 1em, 4);
        }
    }
}

/*  patch for Safari 3.2.3, Chrome 7
Safari 3.1-5.0, Chrome 9- (& old versions of Chrome 10 before 10.0.64)
--------------------------------------------------------------------------------------*/
.box > p:first-of-type {
    @include css-hack(chromeLte9SafariLte5){
        margin-top : auto;
    }
}