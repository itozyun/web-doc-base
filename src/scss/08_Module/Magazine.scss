/* [module] Magazine
 *  出現位置は #lB .lMi 下で固定
 *
 * .Magazine
 *   .Magazine-sep (.Magazine-only)
 *     .Magazine-item
 *       .Magazine-date
 *         time
 *           .Magazine-yy
 *           .Magazine-y
 *           .Magazine-mm
 *           .Magazine-m
 *           .Magazine-dd
 *       .Magazine-main
 *         h3
 *         .Magazine-labels
 *         .Magazine-snippet
 *         a.btn
 *           i
--------------------------------------------------------------------------------------*/
/*
* https://developer.mozilla.org/ja/docs/conflicting/Web/CSS/CSS_Flexible_Box_Layout/Backwards_Compatibility_of_Flexbox
*/
@mixin flexbox {
    /* clean-css ignore:start */
    display : -webkit-box;
    display : -moz-box;
    display : -webkit-flex;
    display : -ms-flexbox;
    display : flex;
    /* clean-css ignore:end */
}
@mixin flex( $fg: 1, $fs: 0, $fb: auto ){
    // Set a variable to be used by box-flex properties
    $fg-boxflex : $fg;

    // Box-Flex only supports a flex-grow value so lets grab the
    // first item in the list and just return that.
    @if type-of($fg) == 'list' {
        $fg-boxflex : nth($fg, 1);
    }

    -webkit-box  : $fg-boxflex;
    -moz-box     : $fg-boxflex;
    -webkit-flex : $fg $fs $fb;
    -ms-flexbox  : $fg $fs $fb;
    flex         : $fg $fs $fb;
}

@if( $Option_Magazine ){ 
    .Magazine-item {
        @include clearfix;
        @include unbreak-inside;
        padding : 1em 0;
    }
        .Magazine-date {
            @include line-height(1, 1);

            display     : block;
            float       : left;
            font-weight : bold;
            font-family : monospace;
        }
            .Magazine-yy {
                display   : block;
                font-size : 2em;
            }
            .Magazine-mm {
                display   : block;
                font-size : 4em;
            }
            .Magazine-dd {
                font-size : 4em;
            }
            .Magazine-mm, .Magazine-dd {
                line-height : .9;
            }
            .Magazine-y, .Magazine-m {
                display : none;
            }

        .Magazine-main {
            @include clearfix;
            position     : relative;
            margin-left  : 5.5em;
            border-width : 0 0 0 .5em;
            padding-left : 1.5em;
            border-color : $COLOR_Light_text;
        }
            .Magazine h3 {
                font-size   : 2em;
                font-weight : bold;
                margin      : 0.2em 0 0;
                padding     : 0;
            }
            .Magazine-label {
                @include unbreak-box-with-long-text;
                margin : .5em 0 .8em;
            }
            .Magazine-snippet {
                @include clearfix;
                img {
                    float  : left;
                    margin : 0 1em 1em 0;
                }
                p {
                    line-height : 1.4em;
                }
            }
            .Magazine .btn {
                position  : absolute;
                font-size : .83em;
                left      : math.div(-6em, .83);
                bottom    : 0;
                width     : math.div(3.5em, .83);
                padding   : math.div(0.25em, .83);
            }

    /*  WSXGA
    --------------------------------------------------------------------------------------*/
    @include media(WSXGA_landscapePrint) {
        .Magazine-sep {
            display      : table;
            table-layout : fixed;
            margin       : 1em 0;
        }
            .Magazine-item {
                display        : table-cell;
                vertical-align : top;
                width          : 50%;
            }
    }
    @include media(WSXGA) {
        .Magazine-item {
            padding : 1em 0 1em math.div($WSXGA_COLUMN_GAP_EM, 2);
        }
        .Magazine-item:first-child {
            padding : 1em math.div($WSXGA_COLUMN_GAP_EM, 2) 1em 0;
        }
    }

    /*  Tablet
    --------------------------------------------------------------------------------------*/
    @include media(tablet) {
        .Magazine img {
            margin-left : 0;
        }
    }

    /*  Phablet
    --------------------------------------------------------------------------------------*/
    @include media(phablet) {
        .Magazine {
            margin       : 1em 0 0;
            border-width : .5em 0 0;
            border-color : $COLOR_Light_text;
        }
            .Magazine-item {
                padding : 1em 0 0;
            }
                .Magazine-date {
                    float       : none;
                    font-family : inherit;
                }
                .Magazine-yy {
                    display   : inline;
                    font-size : 1em;
                }
                .Magazine-mm {
                    display   : inline;
                    font-size : 1em;
                }
                .Magazine-dd {
                    font-size : 1em;
                }
                .Magazine-y, .Magazine-m {
                    display : inline;
                }

            .Magazine-main {
                margin       : 0;
                float        : none;
                border-width : 0 0 .5em;
                padding      : 0 0 1em;
            }
                .Magazine h3 {
                    font-size : 1.3em;
                }
                .Magazine .btn {
                    position  : static;
                    width     : auto;
                    font-size : 1em;
                    padding   : .5em 1em;
                }
    }

    /*  Dark theme
    --------------------------------------------------------------------------------------*/
    @include media(dark_theme) {
        .Magazine,
        .Magazine-main {
            border-color : $COLOR_Dark_text;
        }
    }

    /*  Print
    --------------------------------------------------------------------------------------*/
    @include media(print) {
        .Magazine-item {
            padding : 1em 0 1em math.div($PRINT_COLUMN_GAP_EM, 2);
        }
        @if( $CANUSE_1ST_CHILD_PSEUDO_CLASS ){
            .Magazine-item:first-child {
                padding : 1em math.div($PRINT_COLUMN_GAP_EM, 2) 1em 0;
            }
        }
    }
}