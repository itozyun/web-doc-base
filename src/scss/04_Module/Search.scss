/* [module] SearchBox
 *  出現位置は #lH .lSi 下で固定
 *
 *  form.Search
 *    input[type=text].Search-txt
 *    input[type=submit].btn
--------------------------------------------------------------------------------------*/
$SEARCH_BTN_WIDTH : 3em;

@if( $UA_Opera8 or $IS_Opera7x ){
    .Search-txt {
        margin-right : $INPUT_BORDER_WIDTH * 2;
    }
    .Search input {
        @if( $IS_Opera7x ){
            border-width : 0;
        } @else {
            border-width : $INPUT_BORDER_WIDTH;
        }
        padding : 0;
    }
} @else if( $IS_OLD_GECKO ){
    @if( $Option_simpleHeader ){
        #lH .lSi {
            padding-right : #{$SEARCH_BTN_WIDTH + $INPUT_BORDER_WIDTH};
        }
    }
    .Search {
        height : $BASE_LINE_HEIGHT_EM;
    }
    .Search-txt {
        width : 100%;
    }
    @if( $UA_Gck-097 ){
        @if( $Option_simpleHeader ){
            #lH .lSi {
                position : relative;
            }
        }
        .Search .btn {
            position : absolute;
            top      : 0;
        }
    } @else if( $UA_Gck101-121 or $UA_Gck130-190 ){
        .Search {
            position : relative;
            display  : block;
        }
        .Search input {
            position : absolute;
            top      : 0;
            display  : block;
        }
         .Search-txt {
            left   : 0;
            height : #{$BASE_LINE_HEIGHT_EM + $INPUT_BORDER_WIDTH * 2};
        }
    }
} @else {
    .Search {
        position : relative;
        display  : block;
        height   : $BASE_LINE_HEIGHT_EM;

        @if( $UA_Modern or $UA_IE9 or $UA_IE8 or $UA_IE7 or $UA_IE6 ){
            margin : 0 $SEARCH_BTN_WIDTH 0 #{$INPUT_BORDER_WIDTH * 3 + $FORM_ITEM_PADDING_LR * 2};
        } @else {
            padding : 0 $SEARCH_BTN_WIDTH 0 0;
        }

        @if( $IS_NOT_IE or $UA_IE9 or $UA_IE8 ){
            width : auto;
        }
        @if( $UA_IE5 ){
            width : 100%;
        }
    }

    .Search input {
        position : absolute;
        top      : 0;

        /* //_{#can-hover-pseudo-class */
        &:hover,
        /* //_}#can-hover-pseudo-class */
        &:active
        /* //_{#can-focus-pseudo-class */
        , &:focus
        /* //_}#can-focus-pseudo-class */
        {
            z-index : 1;
        }
    }

    .Search-txt {
        display : block;
        width   : 100%; /* Opera <=9.27 で無視されるので <input size> 指定する */

        @if( $UA_Opera9 ){
            box-sizing  : content-box; /* Opera 9.0~9.27 */
            height      : #{$BASE_LINE_HEIGHT_EM - $INPUT_BORDER_WIDTH * 2}; /* Opera 9.0~9.27 */
            line-height : #{$BASE_LINE_HEIGHT_EM - $INPUT_BORDER_WIDTH * 2}; /* Opera 9.0~9.27 */
        }
        
        @if( $UA_Modern or $UA_IE9 or $UA_IE8 or $UA_IE7 or $UA_IE6 ){
            left : -#{$INPUT_BORDER_WIDTH * 3 + $FORM_ITEM_PADDING_LR * 2};
        } @else {
            left : math.div($INPUT-BORDER-WIDTH, 2);
        }

        @if( $UA_Modern ){
            &:invalid {
                color : $COLOR_Default_casual_text; /* ie10,11 で赤字を上書き */
            }
        }
    }
}
    /* 1. ie6-7 は input[type=submit] が border-box, [type=text] は content-box の為
          width & height と border を em サイズにして補正する。
       2. ie5.5 以下は、[type=submit] [type=text] 共に border-box。
    */
    .Search .btn {
        padding-left  : 0;
        padding-right : 0;
        white-space   : nowrap;

        @if( $IS_IE8_OR_9 or $UA_Modern ){
            width : $SEARCH_BTN_WIDTH;
            right : #{- $SEARCH_BTN_WIDTH};
        }

        @if( $UA_IE7 or $UA_IE6 ){
            width : #{$SEARCH_BTN_WIDTH + $INPUT_BORDER_WIDTH * 2};
            right : -$SEARCH-BTN-WIDTH - math.div($INPUT-BORDER-WIDTH, 2);
        }

        @if( $UA_IE5 or $UA_IE55 ){
            width : $SEARCH_BTN_WIDTH;
            right : math.div($INPUT-BORDER-WIDTH, 2);
        }

        @if( $UA_Gck-097 ){
            width : $SEARCH_BTN_WIDTH;
            right : - $INPUT-BORDER-WIDTH;
        } @else if( $UA_Gck101-121 or $UA_Gck130-190 ){
            width : $SEARCH_BTN_WIDTH;
            right : - $SEARCH_BTN_WIDTH - $INPUT-BORDER-WIDTH;
        } @else if( $UA_Opera9 ){
            width : $SEARCH_BTN_WIDTH;
            right : math.div($INPUT-BORDER-WIDTH, 2);
        }

        @if( $UA_Opera72 == false ){ // Opera 7.23 でだけ、ボタンの上が欠ける、7.20 では発生しない
            /* http://tacamy.hatenablog.com/entry/2014/02/19/141948 */
            overflow : hidden;
        }

        @if( $UA_Modern or $UA_IE9 or $UA_IE8 or $UA_IE7 or $UA_IE6 ){
            // https://developer.mozilla.org/en-US/docs/Web/CSS/text-overflow#browser_compatibility
            text-overflow : ellipsis; // Firefox 7+, ie 6+, Opera 11+, Safari 1.3+, Chrome 1
        };
    }
